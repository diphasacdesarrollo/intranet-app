{% extends "supervisor/layout.html" %}

{% block content %}

    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="mb-0">Rutas</h1>
        <div>
            <a href="{{ url('new_schedule_visit') }}" class="btn btn-primary">
                Agregar nueva ruta
            </a>
        </div>
    </div>

    {% include '_messages.html' %}

    <form class="d-block d-sm-flex d-md-block d-lg-flex align-items-end mb-4"
          action="{{ url('supervisor_scheduled_visits') }}" method="GET" style="gap: 1rem;">
        {% include 'supervisor/_filters.html' %}
    </form>

    {% if scheduled_visits %}
        <div class="table-responsive">
            <table class="table">
                <thead>
                <tr>
                    <th scope="col">Vendedor</th>
                    <th scope="col">Cliente</th>
                    <th scope="col">Ubicaci√≥n</th>
                    <th scope="col">Fecha</th>
                    <th scope="col">Estado</th>
                    <th></th>
                    <th></th>
                </tr>
                </thead>
                <tbody>
                {% for scheduled_visit in scheduled_visits %}
                    <tr>
                        <td>{{ scheduled_visit.user.get_full_name() }}</td>
                        <td>{{ scheduled_visit.location.client.ruc }}: {{ scheduled_visit.location.client.name }}</td>
                        <td>{{ scheduled_visit.location.address }}</td>

                        <!--- Date -->
                        <td>
                            {{ scheduled_visit.check_in.weekday()|spanish_day_of_the_week }}
                            {{ scheduled_visit.check_in.strftime('%d') }} de
                            {{ scheduled_visit.check_in.month|spanish_month }},
                            {{ scheduled_visit.check_in.strftime('%Y') }}
                        </td>
                        <td>
                            {{ scheduled_visit.get_status() }}
                        </td>

                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <p>No se encontraron rutas que coincidan con los filtros.</p>
    {% endif %}




{% endblock %}